# Zabbix Telegram Notification Handler с очисткой сообщений

Данный проект предоставляет решение для отправки уведомлений из Zabbix в Telegram с автоматической очисткой сообщений о решенных проблемах.

## Особенности

- Отправка уведомлений о проблемах в Telegram
- Автоматическое удаление сообщений о проблемах после их решения
- Хранение сопоставлений событий Zabbix и сообщений Telegram в локальной базе данных
- Поддержка уведомлений о событиях и восстановлениях

## Компоненты

1. **`zabbix_telegram_handler.py`** - основной скрипт обработки уведомлений
2. **`zabbix_telegram_config.md`** - подробная инструкция по настройке
3. **`setup_zabbix_telegram.sh`** - скрипт установки

## Как это работает

1. При возникновении события в Zabbix (статус PROBLEM) скрипт отправляет сообщение в Telegram и сохраняет сопоставление
2. При решении проблемы (статус OK) скрипт находит соответствующее сообщение о проблеме и удаляет его из чата
3. В результате в чате остаются только актуальные сообщения о нерешенных проблемах

## Установка

1. Установите все файлы в рабочую директорию
2. Выполните установочный скрипт:
   ```bash
   chmod +x setup_zabbix_telegram.sh
   ./setup_zabbix_telegram.sh
   ```
3. Следуйте инструкциям по настройке переменных окружения
4. Ознакомьтесь с деталями настройки в `zabbix_telegram_config.md`

## Требования

- Python 3.6+
- Библиотека `requests`
- Доступ к API Telegram Bot
- Доступ к системе Zabbix

## Безопасность

- Хранение токена бота и ID чата в переменных окружения
- Ограничение прав доступа к файлу базы данных
- Использование локальной базы данных для хранения сопоставлений

## Автор

Скрипт разработан для автоматизации уведомлений Zabbix с поддержанием чистоты в канале уведомлений Telegram.
